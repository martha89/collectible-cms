<div class="password-reset-component">
    <div class="form-group login row">
        <div class="col-xs-12 col-sm-3">
            <label for="upn" class="form-control-label">Login Address:</label>
        </div>
        <div class="col-xs-12 col-sm-5">
            <input type="text" class="form-control" [(ngModel)]="upn" placeholder="you@gmail.com" id="upn" />
        </div>
        <div class="col-xs-12 col-sm-4">
            <button type="button" class="btn btn-secondary" (click)="requestReset()" [disabled]="working || requestSuccess === true">
                <span *ngIf="!working">Request Reset</span>
                <span *ngIf="working && requestSuccess !== true" class="fa fa-spinner fa-spin" aria-hidden="true"></span>
            </button>
        </div>
    </div>
    <div *ngIf="requestSuccess === true" class="alert alert-success request-result">
        A confirmation email has been sent to your associated email account. Please paste the secret key you receive into the field below.
    </div>
    <div *ngIf="requestSuccess === false" class="alert alert-danger request-result">
        An error was encountered while sending the confirmation email. Please check your login email address and try again.
    </div>
    <div *ngIf="requestSuccess === true" class="reset-form">
        <div class="form-group row">
            <label class="col-xs-12 col-sm-4 form-control-label" for="key">Secret Key:</label>
            <div class="col-xs-12 col-sm-8">
                <input type="text" class="form-control" [(ngModel)]="key" placeholder="" id="key" />
            </div>
            <label class="col-xs-12 col-sm-4 form-control-label" for="password1">New Password:</label>
            <div class="col-xs-12 col-sm-8">
                <input type="password" class="form-control" [(ngModel)]="password1" placeholder="" id="password1" />
            </div>
            <label class="col-xs-12 col-sm-4 form-control-label" for="password2">Confirm Password:</label>
            <div class="col-xs-12 col-sm-8">
                <input type="password" class="form-control" [(ngModel)]="password2" placeholder="" id="password2" />
            </div>
        </div>
        <div *ngIf="resetSuccess === true" class="alert alert-success reset-result">
            Your password has been reset! Please allow 5 minutes before logging back into <a href="#">Collectible CMS</a>.
        </div>
        <div *ngIf="resetSuccess === false" class="alert alert-danger reset-result">
            Failed to reset password. Please check password requirements and try again.
        </div>
        <button type="button" class="btn btn-success" (click)="reset()" [disabled]="working || !key.length || !password1.length || password1 != password2 || resetSuccess === true">
            <span *ngIf="!working">Save Password</span>
            <span *ngIf="working" class="fa fa-spinner fa-spin" aria-hidden="true"></span>
        </button>
    </div>
</div>
